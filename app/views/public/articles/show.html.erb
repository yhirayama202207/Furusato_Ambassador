<div class= "row">
<%= render 'public/articles/list', japan_prefectures: @japan_prefectures %>

<div class= "col-8">
</br>
<h5>&emsp;記事詳細</h5>
</br>
<h4>&emsp;<%= @article.title %>（<%= @article.japan_prefecture.name %><%= @article.region %>／<%= @article.japan_prefecture.japan_area.name %>地方）</h4>
<h6>&emsp;
<%= link_to user_path(@article.user.id) do %>
<% if @article.user.image.attached? %>
  <%= image_tag @article.user.image, size: "30x30" %>
<% else %>
  <%= image_tag 'no_image.jpg', size: "30x30" %>
<% end %>
<%= @article.user.user_name %>
<% end %>
&emsp;<%= @article.created_at.strftime("%Y-%m-%d %H:%M") %>
</h6>
&emsp;
<% @article.tags.each do |tag| %>
  <i class="fas fa-tags" style="color:#690DFF;"></i>
  <%= link_to articles_tag_index_path(tag.id) do %>
    <%= tag.name %>
  <% end %>
<% end %>
</br>
<h5>&emsp;<%= @article.body %></h5>
</br>
&emsp;
<% if @article.image.attached? %>
  <%= image_tag @article.image, size: "300x300" %>
<% else %>
  <%= image_tag 'no_image.jpg', size: "300x300" %>
<% end %>
</br>
</br>

<% if @article.latitude %>
<div id='map'></div>

<style>
#map {
  height: 300px;
  width: 600px;
}
</style>

<!-- js部分 -->
<script>
//初期マップの設定
let map
let marker
function initMap(){
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center:  {lat: <%= @article.latitude %>, lng: <%= @article.longitude %>},
    zoom: 15,
  });

   marker = new google.maps.Marker({
    position:  {lat: <%= @article.latitude %>, lng: <%= @article.longitude %>},
    map: map
  });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap" async defer></script>
<% end %>

</br>

&emsp;
<% if @article.liked_by?(current_user) %>
    <label>
      <%= link_to article_likes_path(@article), method: :delete do %>
        <i class="fas fa-heart" style="color: #ff4500;"></i>
      <% end %>
      <%= @article.likes.count %> いいね済み
    </label>
    <% else %>
    <label>
      <%= link_to article_likes_path(@article), method: :post do %>
        <i class="fas fa-heart" style="color: #d3d3d3;"></i>
      <% end %>
      <%= @article.likes.count %> いいね
    </label>
  <% end %>
  &emsp;
  <% if @article.foot_printed_by?(current_user) %>
    <label>
      <%= link_to article_foot_prints_path(@article), method: :delete do %>
        <i class="fas fa-paw" style="color: #f39800;"></i>
      <% end %>
      <%= @article.foot_prints.count %> 行った！済み
    </label>
    <% else %>
    <label>
      <%= link_to article_foot_prints_path(@article), method: :post do %>
        <i class="fas fa-paw" style="color: #d3d3d3;"></i>
      <% end %>
      <%= @article.foot_prints.count %> 行った
    </label>
  <% end %>
  &emsp;
  <% if @article.clipped_by?(current_user) %>
    <label>
      <%= link_to article_clips_path(@article), method: :delete do %>
        <i class="fas fa-paperclip" style="color: #2ca9e1;"></i>
      <% end %>
      <%= @article.clips.count %> クリップ済み
    </label>
    <% else %>
    <label>
      <%= link_to article_clips_path(@article), method: :post do %>
        <i class="fas fa-paperclip" style="color: #d3d3d3;"></i>
      <% end %>
      <%= @article.clips.count %> クリップ
    </label>
  <% end %>

</br>

&emsp;&emsp;
<% if @article.user == current_user %>
<%= link_to "編集する", edit_article_path(@article.id), class: "btn btn-success" %>&emsp;
<%= link_to "削除する", article_path(@article.id), method: :delete, class: "btn btn-danger", "data-confirm" => "本当に削除しますか？（削除した記事は復元できません）" %>
<% end %>
</br>

SNSでシェア
<%= link_to "http://twitter.com/share?url=#{request.url}/&text=ふるさとアンバサダーで地域の魅力を発信しよう&hashtags=ふるさとSNS",{class:"footer-icon_1"} do %>
  <i class="fab fa-twitter"></i>
<% end %>
</br>
</br>

<h5>この記事にコメントする<i class="far fa-comment-dots"></i></h5>
<%= form_with model: @comment, url: article_comments_path(@comment.article_id), method: :post do |f| %>
    <%= f.text_field :comment, placeholder: "コメント" %>&emsp;
    <label>画像</label>
    <%= f.file_field :image, accept: "image/*" %></br>
    <%= f.submit "新規登録", class: "btn btn-success" %></br>
<% end %>
</br>
</br>

<h5>コメント一覧</h5>
<% 20.times do  %>
  <i class="fas fa-apple-alt" style="color: #ff3545;"></i>
  <i class="fas fa-apple-alt" style="color: #2ADBB6;"></i>
<% end %>
</br>
<% @comments.each do |comment| %>
<%= link_to user_path(comment.user_id) do %>
<% if comment.user.image.attached? %>
  <%= image_tag comment.user.image, size: "30x30" %>
<% else %>
  <%= image_tag 'no_image.jpg', size: "30x30" %>
<% end %>
<%= comment.user.user_name %>
<% end %>&emsp;
<%= comment.created_at.strftime("%Y-%m-%d %H:%M") %>
</br>
<%= comment.comment %>
</br>
<% if comment.image.attached? %>
  </br>
  <%= image_tag comment.image, size: "200x200" %>
  </br>
<% end %>
</br>
<% if comment.user == current_user %>
<%= link_to "編集", edit_article_comment_path(@article.id, comment.id), class: "btn btn-success" %>&emsp;
<%= link_to "削除", article_comment_path(@article.id, comment.id), method: :delete, class: "btn btn-danger", "data-confirm" => "本当に削除しますか？（削除したコメントは復元できません）" %>
<% end %>
</br>
<% 20.times do  %>
  <i class="fas fa-apple-alt" style="color: #ff3545;"></i>
  <i class="fas fa-apple-alt" style="color: #2ADBB6;"></i>
<% end %>
</br>
<% end %>
</div>
</div>
</div>