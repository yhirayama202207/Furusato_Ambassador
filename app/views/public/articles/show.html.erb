<div class= "row">
<%= render 'public/articles/list', japan_prefectures: @japan_prefectures %>

<div class= "col-8">
</br>
<h5>&emsp;è¨˜äº‹è©³ç´°</h5>
</br>
<h4>&emsp;<%= @article.title %>ï¼ˆ<%= @article.japan_prefecture.name %><%= @article.region %>ï¼<%= @article.japan_prefecture.japan_area.name %>åœ°æ–¹ï¼‰</h4>
<h6>&emsp;
<%= link_to user_path(@article.user.id) do %>
<% if @article.user.image.attached? %>
  <%= image_tag @article.user.image, size: "30x30" %>
<% else %>
  <%= image_tag 'no_image.jpg', size: "30x30" %>
<% end %>
<%= @article.user.user_name %>
<% end %>
&emsp;<%= @article.created_at %>
</h6>
&emsp;
<% @article.tags.each do |tag| %>
  <%= link_to articles_tag_index_path do %>
    <i class="fas fa-tags"></i><%= tag.name %>
  <% end %>
<% end %>
</br>
<h5>&emsp;<%= @article.body %></h5>
</br>
&emsp;
<% if @article.image.attached? %>
  <%= image_tag @article.image, size: "300x300" %>
<% else %>
  <%= image_tag 'no_image.jpg', size: "300x300" %>
<% end %>
</br>
</br>

<% if @article.latitude %>
<div id='map'></div>

<style>
#map {
  height: 300px;
  width: 600px;
}
</style>

<!-- jséƒ¨åˆ† -->
<script>
//åˆæœŸãƒãƒƒãƒ—ã®è¨­å®š
let map
let marker
function initMap(){
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center:  {lat: <%= @article.latitude %>, lng: <%= @article.longitude %>},
    zoom: 15,
  });

   marker = new google.maps.Marker({
    position:  {lat: <%= @article.latitude %>, lng: <%= @article.longitude %>},
    map: map
  });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap" async defer></script>
<% end %>

</br>

&emsp;
<% if @article.liked_by?(current_user) %>
    <label>
      <%= link_to article_likes_path(@article), method: :delete do %>
        <i class="fas fa-heart" style="color: #ff4500;"></i>
      <% end %>
      <%= @article.likes.count %> ã„ã„ã­æ¸ˆã¿
    </label>
    <% else %>
    <label>
      <%= link_to article_likes_path(@article), method: :post do %>
        <i class="fas fa-heart" style="color: #d3d3d3;"></i>
      <% end %>
      <%= @article.likes.count %> ã„ã„ã­
    </label>
  <% end %>
  &emsp;
  <% if @article.foot_printed_by?(current_user) %>
    <label>
      <%= link_to article_foot_prints_path(@article), method: :delete do %>
        <i class="fas fa-paw" style="color: #f39800;"></i>
      <% end %>
      <%= @article.foot_prints.count %> è¡Œã£ãŸï¼æ¸ˆã¿
    </label>
    <% else %>
    <label>
      <%= link_to article_foot_prints_path(@article), method: :post do %>
        <i class="fas fa-paw" style="color: #d3d3d3;"></i>
      <% end %>
      <%= @article.foot_prints.count %> è¡Œã£ãŸ
    </label>
  <% end %>
  &emsp;
  <% if @article.clipped_by?(current_user) %>
    <label>
      <%= link_to article_clips_path(@article), method: :delete do %>
        <i class="fas fa-paperclip" style="color: #2ca9e1;"></i>
      <% end %>
      <%= @article.clips.count %> ã‚¯ãƒªãƒƒãƒ—æ¸ˆã¿
    </label>
    <% else %>
    <label>
      <%= link_to article_clips_path(@article), method: :post do %>
        <i class="fas fa-paperclip" style="color: #d3d3d3;"></i>
      <% end %>
      <%= @article.clips.count %> ã‚¯ãƒªãƒƒãƒ—
    </label>
  <% end %>

</br>

&emsp;&emsp;
<% if @article.user == current_user %>
<%= link_to "ç·¨é›†ã™ã‚‹", edit_article_path(@article.id), class: "btn btn-success" %>&emsp;
<%= link_to "å‰Šé™¤ã™ã‚‹", article_path(@article.id), method: :delete, class: "btn btn-danger", "data-confirm" => "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿï¼ˆå‰Šé™¤ã—ãŸè¨˜äº‹ã¯å¾©å…ƒã§ãã¾ã›ã‚“ï¼‰" %>
<% end %>
</br>

SNSã§ã‚·ã‚§ã‚¢
<%= link_to "http://twitter.com/share?url=#{request.url}/&text=ãµã‚‹ã•ã¨ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ã§åœ°åŸŸã®é­…åŠ›ã‚’ç™ºä¿¡ã—ã‚ˆã†&hashtags=ãµã‚‹ã•ã¨SNS",{class:"footer-icon_1"} do %>
  <i class="fab fa-twitter"></i>
<% end %>
</br>
</br>

<h5>ã“ã®è¨˜äº‹ã«ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ğŸ’­</h5>
<%= form_with model: @comment, url: article_comments_path(@comment.article_id), method: :post do |f| %>
    <%= f.text_field :comment, placeholder: "ã‚³ãƒ¡ãƒ³ãƒˆ" %>&emsp;
    <label>ç”»åƒ</label>
    <%= f.file_field :image, accept: "image/*" %></br>
    <%= f.submit "æ–°è¦ç™»éŒ²", class: "btn btn-success" %></br>
<% end %>
</br>
</br>

<h5>ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§</h5>
ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸ
</br>
<% @comments.each do |comment| %>
<%= link_to user_path(comment.user_id) do %>
<% if comment.user.image.attached? %>
  <%= image_tag comment.user.image, size: "30x30" %>
<% else %>
  <%= image_tag 'no_image.jpg', size: "30x30" %>
<% end %>
<%= comment.user.user_name %>
<% end %>&emsp;
<%= comment.created_at %>
</br>
<%= comment.comment %>
</br>
<% if comment.image.attached? %>
  </br>
  <%= image_tag comment.image, size: "200x200" %>
  </br>
<% end %>
</br>
<% if comment.user == current_user %>
<%= link_to "ç·¨é›†", edit_article_comment_path(@article.id, comment.id), class: "btn btn-success" %>&emsp;
<%= link_to "å‰Šé™¤", article_comment_path(@article.id, comment.id), method: :delete, class: "btn btn-danger", "data-confirm" => "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿï¼ˆå‰Šé™¤ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆã¯å¾©å…ƒã§ãã¾ã›ã‚“ï¼‰" %>
<% end %>
</br>
ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸ
</br>
<% end %>
</div>
</div>
</div>